import{r as c,bn as e,bo as ye,bp as Ce,bq as Se,br as be,bs as je,bt as ve,bu as we,bv as Te,bw as Ne,bx as ke,by as Le,bz as Ae,bA as Ie,bB as Re,bC as Me,bD as Pe}from"./vendor-fe5d2978.js";import{S as Ee,E as Ge,a as Be,b as qe,D as ze,c as He}from"./fluentui-icons-2d7a34ad.js";import{S as f,I as Ve,P as Fe,T as ie,a as $e,B as K,b as Oe,c as Qe,D as De,d as We,e as Ue,C as ae,f as Ke,g as Je}from"./fluentui-react-d0f3c5f2.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&g(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function g(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();var j=(s=>(s.Hybrid="hybrid",s.Vectors="vectors",s.Text="text",s))(j||{}),L=(s=>(s.Vector="Vector Search",s.Semantic="Semantic Ranker",s.GraphRAG="GraphRAG",s))(L||{});const J=c.createContext(void 0),Xe=({children:s})=>{const[a,r]=c.useState(L.Vector);return e.jsx(J.Provider,{value:{sharedState:a,setSharedState:r},children:s})};const Ze="_layout_pmgip_1",Ye="_header_pmgip_7",et="_headerContainer_pmgip_12",tt="_headerTitleContainer_pmgip_20",st="_radioContainer_pmgip_28",at="_radioInput_pmgip_40",ot="_headerLogo_pmgip_49",nt="_headerTitle_pmgip_20",rt="_headerRightText_pmgip_58",T={layout:Ze,header:Ye,headerContainer:et,headerTitleContainer:tt,radioContainer:st,radioInput:at,headerLogo:ot,headerTitle:nt,headerRightText:rt},it=()=>{const[s,a]=c.useState("Vector Search"),r=c.useContext(J);if(!r)throw new Error("Layout component must be used within an AppStateProvider");const{sharedState:g,setSharedState:t}=r,i=l=>{a(l.target.value),console.log("handleModeChange: "+l.target.value.toString()),t(d=>l.target.value)};return e.jsxs("div",{className:T.layout,children:[e.jsx("header",{className:T.header,role:"banner",children:e.jsxs("div",{className:T.headerContainer,children:[e.jsx(ye,{to:"/",className:T.headerTitleContainer,children:e.jsx("h3",{className:T.headerTitle,children:"Legal Research Copilot"})}),e.jsxs("div",{className:T.radioContainer,children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"Vector Search",checked:s==="Vector Search",onChange:i,className:T.radioInput}),"Vector Search"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"Semantic Ranker",checked:s==="Semantic Ranker",onChange:i,className:T.radioInput}),"Semantic Ranker"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"GraphRAG",checked:s==="GraphRAG",onChange:i,className:T.radioInput}),"GraphRAG + Semantic Ranker"]})]}),e.jsx("h4",{className:T.headerRightText,children:"Demo: GraphRAG on PostgreSQL"})]})}),e.jsx(Ce,{})]})},ct="_container_ggo0d_1",lt="_chatRoot_ggo0d_8",dt="_chatContainer_ggo0d_13",ht="_chatEmptyState_ggo0d_21",ut="_chatEmptyStateTitle_ggo0d_31",pt="_chatEmptyStateSubtitle_ggo0d_38",gt="_chatMessageStream_ggo0d_54",mt="_chatMessageGpt_ggo0d_66",xt="_chatMessageGptMinWidth_ggo0d_73",_t="_chatInput_ggo0d_78",ft="_chatAnalysisPanel_ggo0d_91",yt="_chatSettingsSeparator_ggo0d_99",Ct="_loadingLogo_ggo0d_105",St="_commandsContainer_ggo0d_109",bt="_commandButton_ggo0d_114",u={container:ct,chatRoot:lt,chatContainer:dt,chatEmptyState:ht,chatEmptyStateTitle:ut,chatEmptyStateSubtitle:pt,chatMessageStream:gt,chatMessageGpt:mt,chatMessageGptMinWidth:xt,chatInput:_t,chatAnalysisPanel:ft,chatSettingsSeparator:yt,loadingLogo:Ct,commandsContainer:St,commandButton:bt},jt="_answerContainer_qz1fg_1",vt="_answerLogo_qz1fg_11",wt="_answerText_qz1fg_15",Tt="_selected_qz1fg_34",Nt="_referenceMetadata_qz1fg_38",kt="_citationLearnMore_qz1fg_43",Lt="_citation_qz1fg_43",At="_followupQuestionsList_qz1fg_65",It="_followupQuestionLearnMore_qz1fg_69",Rt="_followupQuestion_qz1fg_65",Mt="_supContainer_qz1fg_88",Pt="_retryButton_qz1fg_117",Et="_loadingdots_qz1fg_139",Gt="_loading_qz1fg_139",_={answerContainer:jt,answerLogo:vt,answerText:wt,selected:Tt,referenceMetadata:Nt,citationLearnMore:kt,citation:Lt,followupQuestionsList:At,followupQuestionLearnMore:It,followupQuestion:Rt,supContainer:Mt,retryButton:Pt,loadingdots:Et,loading:Gt};function Bt(s,a,r){const g=[];let t=s.trim();if(a){let d=t.length;for(let h=t.length-1;h>=0&&t[h]!=="]";h--)if(t[h]==="["){d=h;break}t=t.substring(0,d)}return{answerHtml:t.split(/\[([^\]]+)\]/g).map((d,x)=>{if(x%2===0)return d;{let h;return g.indexOf(d)!==-1?h=g.indexOf(d)+1:(g.push(d),h=g.length),Se(e.jsx("a",{className:"supContainer",title:d,children:e.jsx("sup",{children:h})}))}}).join(""),citations:g}}const ce=()=>e.jsx(Ee,{primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Answer logo"}),oe=({answer:s,isSelected:a,isStreaming:r,onCitationClicked:g,onThoughtProcessClicked:t,onSupportingContentClicked:i,onFollowupQuestionClicked:l,showFollowupQuestions:d})=>{const x=s.context.followup_questions,h=s.message.content,m=c.useMemo(()=>Bt(h,r),[s]),N=be.sanitize(m.answerHtml);return e.jsxs(f,{className:`${_.answerContainer} ${a&&_.selected}`,verticalAlign:"space-between",children:[e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,horizontalAlign:"space-between",children:[e.jsx(ce,{}),e.jsx("div",{children:e.jsx(Ve,{style:{color:"black"},iconProps:{iconName:"HomeGroup"},title:"Show graph",ariaLabel:"Show graph",onClick:()=>t(),disabled:!1})}),!1]})}),e.jsx(f.Item,{grow:!0,children:e.jsx("div",{className:_.answerText,dangerouslySetInnerHTML:{__html:N}})}),!!m.citations.length&&e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,wrap:!0,tokens:{childrenGap:5},children:[e.jsx("span",{className:_.citationLearnMore,children:"References:"}),e.jsx("ol",{children:m.citations.map((b,I)=>{const y=s.context.data_points[b];return y?e.jsxs("li",{children:[e.jsx("h4",{children:y.id}),e.jsxs("p",{className:_.referenceMetadata,children:["Court: ",y.data.court.name]}),e.jsxs("p",{className:_.referenceMetadata,children:["Decision Date: ",y.data.decision_date]}),e.jsx("p",{children:y.data.name})]},b):null})})]})}),!!x?.length&&d&&l&&e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,wrap:!0,className:`${m.citations.length?_.followupQuestionsList:""}`,tokens:{childrenGap:6},children:[e.jsx("span",{className:_.followupQuestionLearnMore,children:"Follow-up questions:"}),x.map((b,I)=>e.jsx("a",{className:_.followupQuestion,title:b,onClick:()=>l(b),children:`${b}`},I))]})})]})},qt=()=>{const s=je({from:{opacity:0},to:{opacity:1}});return e.jsx(ve.div,{style:{...s},children:e.jsxs(f,{className:_.answerContainer,verticalAlign:"space-between",children:[e.jsx(ce,{}),e.jsx(f.Item,{grow:!0,children:e.jsxs("p",{className:_.answerText,children:["Generating answer",e.jsx("span",{className:_.loadingdots})]})})]})})},zt=({error:s,onRetry:a})=>e.jsxs(f,{className:_.answerContainer,verticalAlign:"space-between",children:[e.jsx(Ge,{"aria-hidden":"true","aria-label":"Error icon",primaryFill:"red"}),e.jsx(f.Item,{grow:!0,children:e.jsx("p",{className:_.answerText,children:s})}),e.jsx(Fe,{className:_.retryButton,onClick:a,text:"Retry"})]}),Ht="_questionInputContainer_hiipw_1",Vt="_questionInputTextArea_hiipw_12",Ft="_questionInputButtonsContainer_hiipw_17",W={questionInputContainer:Ht,questionInputTextArea:Vt,questionInputButtonsContainer:Ft},$t=({onSend:s,disabled:a,placeholder:r,clearOnSend:g,initQuestion:t})=>{const[i,l]=c.useState("");c.useEffect(()=>{t&&l(t)},[t]);const d=()=>{a||!i.trim()||(s(i),g&&l(""))},x=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),d())},h=(m,N)=>{N?N.length<=1e3&&l(N):l("")};return e.jsxs(f,{horizontal:!0,className:W.questionInputContainer,children:[e.jsx(ie,{className:W.questionInputTextArea,placeholder:r,multiline:!0,resizable:!1,borderless:!0,value:i,onChange:h,onKeyDown:x}),e.jsx("div",{className:W.questionInputButtonsContainer,children:e.jsx($e,{content:"Ask question button",relationship:"label",children:e.jsx(K,{size:"large",icon:e.jsx(Be,{primaryFill:"rgba(115, 118, 225, 1)"}),onClick:d})})})]})},Ot="_examplesNavList_epc38_1",Qt="_example_epc38_1",Dt="_exampleText_epc38_29",U={examplesNavList:Ot,example:Qt,exampleText:Dt},Wt=({text:s,value:a,onClick:r})=>e.jsx("div",{className:U.example,onClick:()=>r(a),children:e.jsx("p",{className:U.exampleText,children:s})}),Ut=["Water leaking into the apartment from the floor above. What are the prominent legal precedents in Washington on this problem?","When the landlord is sued in court for leaking pipes, how many times did it result in a favorable decision for the lessee?"],Kt=({onExampleClicked:s})=>e.jsx("ul",{className:U.examplesNavList,children:Ut.map((a,r)=>e.jsx("li",{children:e.jsx(Wt,{text:a,value:a,onClick:s})},r))}),Jt="_container_1p3pb_1",Xt="_message_1p3pb_9",ne={container:Jt,message:Xt},V=({message:s})=>e.jsx("div",{className:ne.container,children:e.jsx("div",{className:ne.message,children:s})}),Zt="_graphPanel_1hbne_1",Yt="_graphContainer_1hbne_8",es="_graphRecall_1hbne_13",ts="_thoughtProcess_1hbne_17",ss="_tList_1hbne_24",as="_tListItem_1hbne_30",os="_tStep_1hbne_56",ns="_tCodeBlock_1hbne_63",rs="_tProp_1hbne_67",is="_citationImg_1hbne_76",re={graphPanel:Zt,graphContainer:Yt,graphRecall:es,thoughtProcess:ts,tList:ss,tListItem:as,tStep:os,tCodeBlock:ns,tProp:rs,citationImg:is};var A=(s=>(s.GraphTab="graph",s.ThoughtProcessTab="thoughtProcess",s.SupportingContentTab="supportingContent",s.CitationTab="citation",s))(A||{});we.registerLanguage("json",Te);function p(s){return Math.max(s*3,15)}const cs=({thoughts:s})=>{const a=c.useContext(J);if(!a)throw new Error("Layout component must be used within an AppStateProvider");const{sharedState:r,setSharedState:g}=a,t=(d,x,h)=>{switch(r){case L.Vector:if(d===1)return 8;break;case L.Semantic:if(x===1)return 8;break;case L.GraphRAG:if(h===1)return 8;break}},i=(d,x,h)=>{switch(r){case L.Vector:return d;case L.Semantic:return x;case L.GraphRAG:return h}},l=[{data:{id:"615468",refs:p(5),selection:t(1,1,1),color:"#ed8035",label:"Le Vette v. Hardman Estate"},position:{x:850,y:600}},{data:{id:"4975399",refs:p(12),selection:t(0,1,1),color:"",label:"Laurelon Terrace, Inc. v. City of Seattle"},position:{x:1100,y:320}},{data:{id:"1034620",refs:p(5),selection:t(0,1,1),color:"#ed8035",label:"Jorgensen v. Massart"},position:{x:250,y:220}},{data:{id:"1127907",refs:p(22),selection:t(0,0,1),color:"#ed8035",label:"Foisy v. Wyman"},position:{x:700,y:180}},{data:{id:"1095193",refs:p(7),selection:t(0,1,1),color:"#ed8035",label:"Thomas v. Housing Authority"},position:{x:430,y:300}},{data:{id:"1186056",refs:p(40),selection:t(0,0,1),color:"#ed8035",label:"Stuart v. Coldwell Banker Commercial Group, Inc."},position:{x:950,y:140}},{data:{id:"4953587",refs:p(13),selection:t(0,0,1),color:"",label:"Schedler v. Wagner"},position:{x:800,y:350}},{data:{id:"2601920",refs:p(10),selection:t(0,0,1),color:"#ed8035",label:"Pappas v. Zerwoodis"},position:{x:500,y:400}},{data:{id:"594079",refs:p(1),selection:t(1,1,1),color:"#ed8035",label:"Martindale Clothing Co. v. Spokane & Eastern Trust Co."},position:{x:530,y:590}},{data:{id:"1279441",refs:p(9),selection:t(0,0,1),color:"",label:"Tope v. King County"},position:{x:950,y:490}},{data:{id:"615468-1",refs:15},position:{x:820,y:540}},{data:{id:"4975399-1",refs:15},position:{x:1070,y:260}},{data:{id:"4975399-2",refs:15},position:{x:1130,y:260}},{data:{id:"1034620-1",refs:15},position:{x:280,y:160}},{data:{id:"1127907-1",refs:15},position:{x:670,y:100}},{data:{id:"1127907-2",refs:15},position:{x:730,y:100}},{data:{id:"1127907-3",refs:15},position:{x:630,y:125}},{data:{id:"1127907-4",refs:15},position:{x:770,y:125}},{data:{id:"1095193-1",refs:15},position:{x:460,y:240}},{data:{id:"1186056-1",refs:15},position:{x:930,y:10}},{data:{id:"1186056-2",refs:15},position:{x:970,y:10}},{data:{id:"1186056-3",refs:15},position:{x:900,y:16}},{data:{id:"1186056-4",refs:15},position:{x:1e3,y:16}},{data:{id:"1186056-5",refs:15},position:{x:870,y:30}},{data:{id:"1186056-6",refs:15},position:{x:1030,y:30}},{data:{id:"1186056-7",refs:15},position:{x:845,y:45}},{data:{id:"1186056-8",refs:15},position:{x:1055,y:45}},{data:{id:"4953587-1",refs:15},position:{x:770,y:290}},{data:{id:"4953587-2",refs:15},position:{x:830,y:290}},{data:{id:"2601920-1",refs:15},position:{x:470,y:340}},{data:{id:"2601920-2",refs:15},position:{x:530,y:340}},{data:{id:"594079-1",refs:15},position:{x:500,y:530}},{data:{id:"1279441-1",refs:15},position:{x:920,y:430}},{data:{id:"1279441-2",refs:15},position:{x:980,y:430}},{data:{source:"615468-1",target:"615468"},classes:"directed"},{data:{source:"4975399-1",target:"4975399"},classes:"directed"},{data:{source:"4975399-2",target:"4975399"},classes:"directed"},{data:{source:"1034620-1",target:"1034620"},classes:"directed"},{data:{source:"1127907-1",target:"1127907"},classes:"directed"},{data:{source:"1127907-2",target:"1127907"},classes:"directed"},{data:{source:"1127907-3",target:"1127907"},classes:"directed"},{data:{source:"1127907-4",target:"1127907"},classes:"directed"},{data:{source:"1095193-1",target:"1095193"},classes:"directed"},{data:{source:"1186056-1",target:"1186056"},classes:"directed"},{data:{source:"1186056-2",target:"1186056"},classes:"directed"},{data:{source:"1186056-3",target:"1186056"},classes:"directed"},{data:{source:"1186056-4",target:"1186056"},classes:"directed"},{data:{source:"1186056-5",target:"1186056"},classes:"directed"},{data:{source:"1186056-6",target:"1186056"},classes:"directed"},{data:{source:"1186056-7",target:"1186056"},classes:"directed"},{data:{source:"1186056-8",target:"1186056"},classes:"directed"},{data:{source:"4953587-1",target:"4953587"},classes:"directed"},{data:{source:"4953587-2",target:"4953587"},classes:"directed"},{data:{source:"2601920-1",target:"2601920"},classes:"directed"},{data:{source:"2601920-2",target:"2601920"},classes:"directed"},{data:{source:"594079-1",target:"594079"},classes:"directed"},{data:{source:"1279441-1",target:"1279441"},classes:"directed"},{data:{source:"1279441-2",target:"1279441"},classes:"directed"},{data:{id:"481657",refs:p(0),selection:t(0,1,0),color:"",label:"Swanson v. White & Bollard, Inc."},position:{x:270,y:470}},{data:{id:"630224",refs:p(1),selection:t(1,1,0),color:"",label:"Imperial Candy Co. v. City of Seattle"},position:{x:1200,y:600}},{data:{id:"1346648",refs:p(3),selection:t(1,1,0),color:"",label:"Tombari v. City of Spokane"},position:{x:680,y:495}},{data:{id:"768356",refs:p(3),selection:t(1,1,0),color:"#ed8035",label:"Uhl Bros. v. Hull"},position:{x:1080,y:540}},{data:{id:"1005731",refs:p(0),selection:t(0,1,0),color:"#ed8035",label:"Finley v. City of Puyallup"},position:{x:650,y:300}},{data:{id:"674990",refs:p(0),selection:t(1,0,0),color:"",label:"Woolworth Co. v. City of Seattle"},position:{x:220,y:560}},{data:{id:"4938756",refs:p(5),selection:t(1,0,0),color:"",label:"Stevens v. King County"},position:{x:270,y:340}},{data:{id:"5041745",refs:p(0),selection:t(1,0,0),color:"",label:"Frisken v. Art Strand Floor Coverings, Inc."},position:{x:1250,y:240}},{data:{id:"1017660",refs:p(4),selection:t(1,0,0),color:"#ed8035",label:"United Mutual Savings Bank v. Riebli"},position:{x:1170,y:200}},{data:{id:"782330",refs:p(0),selection:t(1,0,0),color:"",label:"DeHoney v. Gjarde"},position:{x:1230,y:540}},{data:{id:"4938756-1",refs:15},position:{x:300,y:280}},{data:{id:"1017660-1",refs:15},position:{x:1200,y:140}},{data:{source:"4938756-1",target:"4938756"},classes:"directed"},{data:{source:"1017660-1",target:"1017660"},classes:"directed"}];return e.jsxs("div",{style:{position:"relative",width:"99%"},children:[e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:1},className:re.graphRecall,children:["Recall: ",e.jsx("span",{style:{color:i("red","#0fd406","#0fd406")},children:i("40%","60%","70%")})]}),e.jsx(Ne,{elements:l,className:re.graphContainer,style:{width:"100%",height:"640px"},layout:{name:"preset"},stylesheet:[{selector:"node",style:{label:"data(label)",width:"data(refs)",height:"data(refs)","background-color":"data(color)","border-color":"#0fd406","border-opacity":.7,"border-width":"data(selection)","border-style":"solid"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle",width:1}}]})]})},ls={disabled:!0,style:{color:"grey"}},ds=({answer:s,activeTab:a,activeCitation:r,citationHeight:g,className:t,onActiveTabChanged:i})=>{const l=!s.context.thoughts;//!activeCitation;
const[d,x]=c.useState(""),h=async()=>{if(r){const m=r.indexOf("#")?r.split("#")[1]:"",b=await(await fetch(r,{method:"GET"})).blob();let I=URL.createObjectURL(b);m&&(I+="#"+m),x(I)}};return c.useEffect(()=>{h()},[]),e.jsx(Oe,{className:t,selectedKey:a,onLinkClick:m=>m&&i(m.props.itemKey),children:e.jsx(Qe,{itemKey:A.GraphTab,headerText:"Citation Graph",headerButtonProps:l?ls:void 0,children:e.jsx(cs,{thoughts:s.context.thoughts||[]})})})},hs="_container_cfwv2_1",us={container:hs},ps=({className:s,onClick:a})=>e.jsx("div",{className:`${us.container} ${s??""}`,children:e.jsx(K,{icon:e.jsx(qe,{}),onClick:a,children:"Developer settings"})}),gs="_container_cfwv2_1",ms={container:gs},xs=({className:s,disabled:a,onClick:r})=>e.jsx("div",{className:`${ms.container} ${s??""}`,children:e.jsx(K,{icon:e.jsx(ze,{}),disabled:a,onClick:r,children:"Clear"})}),_s="_container_1pzrp_1",fs={container:_s},ys=({updateRetrievalMode:s})=>{const[a,r]=c.useState(j.Hybrid),g=(t,i)=>{r(i?.data||j.Hybrid),s(i?.data||j.Hybrid)};return e.jsx(f,{className:fs.container,tokens:{childrenGap:10},children:e.jsx(De,{label:"Retrieval mode",options:[{key:"hybrid",text:"Vectors + Text (Hybrid)",selected:a==j.Hybrid,data:j.Hybrid},{key:"vectors",text:"Vectors",selected:a==j.Vectors,data:j.Vectors},{key:"text",text:"Text",selected:a==j.Text,data:j.Text}],required:!0,onChange:g})})},Cs=()=>{const[s,a]=c.useState(!1),[r,g]=c.useState(""),[t,i]=c.useState(.3),[l,d]=c.useState(3),[x,h]=c.useState(j.Hybrid),[m,N]=c.useState(!0),[b,I]=c.useState(!0),y=c.useRef(""),F=c.useRef(null),[q,z]=c.useState(!1),[X,$]=c.useState(!1),[H,O]=c.useState(),[Z,Q]=c.useState(),[R,M]=c.useState(void 0),[E,Y]=c.useState(0),[v,D]=c.useState([]),[ee,te]=c.useState([]),le=async(o,n,C)=>{let P="",w={context:{data_points:{},followup_questions:null,thoughts:[]},message:{content:"",role:"assistant"}};const k=S=>new Promise(_e=>{setTimeout(()=>{P+=S;const fe={...w,message:{content:P,role:w.message.role}};te([...n,[o,fe]]),_e(null)},33)});try{$(!0);for await(const S of C)S.context&&(w.context={...w.context,...S.context}),S.delta&&S.delta.role&&(w.message.role=S.delta.role),S.delta&&S.delta.content&&(z(!1),await k(S.delta.content))}finally{$(!1)}return w.message.content=P,w},G=async o=>{y.current=o,H&&O(void 0),z(!0),Q(void 0),M(void 0);try{const C=[...v.flatMap(k=>[{content:k[0],role:"user"},{content:k[1].message.content,role:"assistant"}]),{content:o,role:"user"}],P={context:{overrides:{use_advanced_flow:m,top:l,retrieval_mode:x,prompt_template:r.length===0?void 0:r,temperature:t}},sessionState:v.length?v[v.length-1][1].sessionState:null},w=new ke("/chat");if(b){const k=await w.getStreamedCompletion(C,P),S=await le(o,v,k);D([...v,[o,S]])}else{const k=await w.getCompletion(C,P);D([...v,[o,k]])}}catch(n){O(n)}finally{z(!1)}},de=()=>{y.current="",H&&O(void 0),Q(void 0),M(void 0),D([]),te([]),z(!1),$(!1)};c.useEffect(()=>F.current?.scrollIntoView({behavior:"smooth"}),[q]),c.useEffect(()=>F.current?.scrollIntoView({behavior:"auto"}),[ee]);const he=(o,n)=>{g(n||"")},ue=(o,n,C)=>{i(o)},pe=(o,n)=>{d(parseInt(n||"3"))},ge=(o,n)=>{N(!!n)},me=(o,n)=>{I(!!n)},xe=o=>{G(o)},se=(o,n)=>{Z===o&&R===A.CitationTab&&E===n?M(void 0):(Q(o),M(A.CitationTab)),Y(n)},B=(o,n)=>{M(R===o&&E===n?void 0:o),Y(n)};return e.jsxs("div",{className:u.container,children:[e.jsxs("div",{className:u.commandsContainer,children:[e.jsx(xs,{className:u.commandButton,onClick:de,disabled:!y.current||q}),e.jsx(ps,{className:u.commandButton,onClick:()=>a(!s)})]}),e.jsxs("div",{className:u.chatRoot,children:[!R&&e.jsxs("div",{className:u.chatContainer,children:[y.current?e.jsxs("div",{className:u.chatMessageStream,children:[X&&ee.map((o,n)=>e.jsxs("div",{children:[e.jsx(V,{message:o[0]}),e.jsx("div",{className:u.chatMessageGpt,children:e.jsx(oe,{isStreaming:!0,answer:o[1],isSelected:!1,onCitationClicked:C=>se(C,n),onThoughtProcessClicked:()=>B(A.ThoughtProcessTab,n),onSupportingContentClicked:()=>B(A.SupportingContentTab,n),onFollowupQuestionClicked:C=>G(C)},n)})]},n)),!X&&v.map((o,n)=>e.jsxs("div",{children:[e.jsx(V,{message:o[0]}),e.jsx("div",{className:u.chatMessageGpt,children:e.jsx(oe,{isStreaming:!1,answer:o[1],isSelected:E===n&&R!==void 0,onCitationClicked:C=>se(C,n),onThoughtProcessClicked:()=>B(A.ThoughtProcessTab,n),onSupportingContentClicked:()=>B(A.SupportingContentTab,n),onFollowupQuestionClicked:C=>G(C)},n)})]},n)),q&&e.jsxs(e.Fragment,{children:[e.jsx(V,{message:y.current}),e.jsx("div",{className:u.chatMessageGptMinWidth,children:e.jsx(qt,{})})]}),H?e.jsxs(e.Fragment,{children:[e.jsx(V,{message:y.current}),e.jsx("div",{className:u.chatMessageGptMinWidth,children:e.jsx(zt,{error:H.toString(),onRetry:()=>G(y.current)})})]}):null,e.jsx("div",{ref:F})]}):e.jsxs("div",{className:u.chatEmptyState,children:[e.jsx(He,{fontSize:"120px",primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Chat logo"}),e.jsx("h1",{className:u.chatEmptyStateTitle,children:"US Case Law Database"}),e.jsx("h2",{className:u.chatEmptyStateSubtitle,children:"Ask anything or try an example"}),e.jsx(Kt,{onExampleClicked:xe})]}),e.jsx("div",{className:u.chatInput,children:e.jsx($t,{clearOnSend:!0,placeholder:"Type a new question",disabled:q,onSend:o=>G(o)})})]}),v.length>0&&R&&e.jsx(ds,{className:u.chatAnalysisPanel,activeCitation:Z,onActiveTabChanged:o=>B(o,E),citationHeight:"810px",answer:v[E][1],activeTab:R}),e.jsxs(We,{headerText:"Configure answer generation",isOpen:s,isBlocking:!1,onDismiss:()=>a(!1),closeButtonAriaLabel:"Close",onRenderFooterContent:()=>e.jsx(Ue,{onClick:()=>a(!1),children:"Close"}),isFooterAtBottom:!0,children:[e.jsx(ae,{className:u.chatSettingsSeparator,checked:m,label:"Use advanced flow with query rewriting and filter formulation. Not compatible with Ollama models.",onChange:ge}),e.jsx("h3",{children:"Settings for database search:"}),e.jsx(Ke,{className:u.chatSettingsSeparator,label:"Retrieve this many matching rows:",min:1,max:50,defaultValue:l.toString(),onChange:pe}),e.jsx(ys,{updateRetrievalMode:o=>h(o)}),e.jsx("h3",{children:"Settings for final chat completion:"}),e.jsx(ie,{className:u.chatSettingsSeparator,defaultValue:r,label:"Override prompt template",multiline:!0,autoAdjustHeight:!0,onChange:he}),e.jsx(Je,{className:u.chatSettingsSeparator,label:"Temperature",min:0,max:1,step:.1,defaultValue:t,onChange:ue,showValue:!0,snapToStep:!0}),e.jsx(ae,{className:u.chatSettingsSeparator,checked:b,label:"Stream chat completion responses",onChange:me})]})]})]})};var Ss=e.jsx(Cs,{});Le();const bs=Ae([{path:"/",element:e.jsx(Xe,{children:e.jsx(it,{})}),children:[{index:!0,element:Ss},{path:"*",lazy:()=>Pe(()=>import("./NoPage-21ea635d.js"),["assets/NoPage-21ea635d.js","assets/vendor-fe5d2978.js"])}]}]);Ie.createRoot(document.getElementById("root")).render(e.jsx(Re.StrictMode,{children:e.jsx(Me,{router:bs})}));
//# sourceMappingURL=index-8c85de0e.js.map
